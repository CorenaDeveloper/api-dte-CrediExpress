basePath: /api/v1
definitions:
  github_com_MarlonG1_api-facturacion-sv_internal_domain_auth_models.AuthCredentials:
    properties:
      api_key:
        type: string
      api_secret:
        type: string
      credentials:
        $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_domain_auth_models.HaciendaCredentials'
    type: object
  github_com_MarlonG1_api-facturacion-sv_internal_domain_auth_models.HaciendaCredentials:
    properties:
      password:
        type: string
      username:
        type: string
    type: object
  github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.Address:
    properties:
      complement:
        type: string
      department:
        type: string
      municipality:
        type: string
    type: object
  github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.BranchOffice:
    properties:
      address:
        $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.Address'
      api_key:
        type: string
      api_secret:
        type: string
      email:
        type: string
      establishment_code:
        type: string
      establishment_code_mh:
        type: string
      establishment_type:
        type: string
      is_active:
        type: boolean
      phone:
        type: string
      pos_code:
        type: string
      pos_code_mh:
        type: string
      user:
        $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.User'
    type: object
  github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.ListBranchesResponse:
    properties:
      api_key:
        type: string
      api_secret:
        type: string
      branch_number:
        type: integer
      establishment_code:
        type: string
      establishment_type:
        type: string
    type: object
  github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.User:
    properties:
      auth_type:
        type: string
      branch_offices:
        description: Relationships
        items:
          $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.BranchOffice'
        type: array
      business_name:
        type: string
      commercial_name:
        type: string
      economic_activity:
        type: string
      economic_activity_desc:
        type: string
      email:
        type: string
      nit:
        type: string
      nrc:
        type: string
      password_pri:
        type: string
      phone:
        type: string
      token_lifetime:
        type: integer
      year_in_dte:
        type: boolean
    type: object
  github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError:
    properties:
      code:
        type: string
      details:
        items:
          type: string
        type: array
      message:
        type: string
    type: object
  pagos.Cliente:
    properties:
      activo:
        type: integer
      apellido:
        type: string
      celular:
        type: string
      departamento:
        type: string
      direccion:
        type: string
      dui:
        type: string
      dui_detras:
        type: string
      dui_frente:
        type: string
      email:
        type: string
      fecha_ingreso:
        type: string
      fecha_nacimiento:
        type: string
      foto_negocio1:
        type: string
      foto_negocio2:
        type: string
      foto_negocio3:
        type: string
      foto_negocio4:
        type: string
      giro:
        type: string
      id:
        type: integer
      id_gestor:
        type: integer
      latitud:
        type: number
      longitud:
        type: number
      nit:
        type: string
      nombre:
        type: string
      profesion:
        type: string
      referencia1:
        type: string
      referencia2:
        type: string
      sexo:
        type: string
      tel_ref1:
        type: string
      tel_ref2:
        type: string
      telefono:
        type: string
      tipo_per:
        type: string
    type: object
host: 185.222.241.94:7319
info:
  contact:
    email: soporte@empresa.com
    name: Soporte API DTE
    url: https://github.com/CorenaDeveloper/api-dte-CrediExpress
  description: API para la gestión de Documentos Tributarios Electrónicos (DTE) que
    cumple con los requisitos establecidos por la autoridad fiscal de El Salvador.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: API Facturación El Salvador
  version: "1.0"
paths:
  /api/pagos/clientes:
    get:
      consumes:
      - application/json
      description: Obtiene una lista paginada de todos los clientes
      parameters:
      - default: 1
        description: Número de página
        in: query
        name: page
        type: integer
      - default: 10
        description: Elementos por página
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Lista de clientes
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties: true
            type: object
      summary: Obtener todos los clientes
      tags:
      - Clientes
  /api/pagos/clientes/{id}:
    get:
      consumes:
      - application/json
      description: Obtiene un cliente específico por su ID
      parameters:
      - description: ID del cliente
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Cliente encontrado
          schema:
            $ref: '#/definitions/pagos.Cliente'
        "404":
          description: Cliente no encontrado
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties: true
            type: object
      summary: Obtener cliente por ID
      tags:
      - Clientes
  /api/pagos/clientes/activos:
    get:
      consumes:
      - application/json
      description: Obtiene una lista paginada de clientes activos
      parameters:
      - default: 1
        description: Número de página
        in: query
        name: page
        type: integer
      - default: 10
        description: Elementos por página
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Lista de clientes activos
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties: true
            type: object
      summary: Obtener clientes activos
      tags:
      - Clientes
  /api/pagos/clientes/dui/{dui}:
    get:
      consumes:
      - application/json
      description: Obtiene un cliente específico por su DUI
      parameters:
      - description: DUI del cliente
        in: path
        name: dui
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Cliente encontrado
          schema:
            $ref: '#/definitions/pagos.Cliente'
        "404":
          description: Cliente no encontrado
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties: true
            type: object
      summary: Obtener cliente por DUI
      tags:
      - Clientes
  /api/pagos/clientes/search:
    get:
      consumes:
      - application/json
      description: Busca clientes por nombre, apellido o DUI
      parameters:
      - description: Término de búsqueda
        in: query
        name: q
        required: true
        type: string
      - default: 1
        description: Número de página
        in: query
        name: page
        type: integer
      - default: 10
        description: Elementos por página
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Resultados de búsqueda
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Parámetros inválidos
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Error interno del servidor
          schema:
            additionalProperties: true
            type: object
      summary: Buscar clientes
      tags:
      - Clientes
  /api/v1/auth/register:
    post:
      consumes:
      - application/json
      description: Register a new user
      parameters:
      - description: User data
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.User'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            items:
              $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_domain_core_user.ListBranchesResponse'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      summary: Register
      tags:
      - Auth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Login with API Key, API Secret and Hacienda Credentials
      parameters:
      - description: Auth credentials
        in: body
        name: auth
        required: true
        schema:
          $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_domain_auth_models.AuthCredentials'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Login
      tags:
      - Auth
  /dte:
    get:
      consumes:
      - application/json
      description: Obtiene lista paginada de DTEs del usuario autenticado
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - default: 1
        description: Número de página
        in: query
        name: page
        type: integer
      - default: 10
        description: Elementos por página
        in: query
        name: limit
        type: integer
      - description: Filtrar por estado
        enum:
        - PROCESSED
        - PENDING
        - ERROR
        in: query
        name: status
        type: string
      - description: Filtrar por tipo DTE
        enum:
        - "01"
        - "03"
        - "05"
        - "06"
        - "11"
        - "14"
        in: query
        name: dte_type
        type: string
      - description: Fecha inicio (YYYY-MM-DD)
        in: query
        name: date_from
        type: string
      - description: Fecha fin (YYYY-MM-DD)
        in: query
        name: date_to
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Listar DTEs
      tags:
      - DTE
  /dte/{id}:
    get:
      consumes:
      - application/json
      description: Obtiene un DTE específico por su código de generación
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Código de generación del DTE
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Obtener DTE por código de generación
      tags:
      - DTE
  /dte/ccf:
    post:
      consumes:
      - application/json
      description: |-
        // @Description Este endpoint permite crear y emitir un Comprobante de Crédito Fiscal (CCF) electrónico.

        ## Ejemplo de Solicitud
        ```json
        {
        "items": [
        {
        "type": 2,
        "description": "Mantenimiento de computadora",
        "quantity": 1,
        "unit_measure": 59,
        "unit_price": 200.00,
        "taxed_sale": 200.00,
        "exempt_sale": 0,
        "non_subject_sale": 0,
        "taxes": ["20"]
        }
        ],
        "receiver": {
        "nrc": "3625871",
        "nit": "051283596",
        "name": "Mauricio Antonio Corena Gomez",
        "commercial_name": "Contabvs",
        "activity_code": "4259",
        "activity_description": "ACTIVIDAD ECONOMICA DE EJEMPLO",
        "address": {
        "department": "06",
        "municipality": "22",
        "complement": "Dirección de Prueba 1, N° 1234"
        },
        "phone": "61032136",
        "email": "corenadeveloper@gmail.com"
        },
        "summary": {
        "operation_condition": 1,
        "total_taxed": 200.00,
        "total_exempt": 0,
        "total_non_taxed": 0,
        "total_non_subject": 0,
        "sub_total_sales": 200.00,
        "sub_total": 200.00,
        "iva_perception": 0,
        "iva_retention": 0,
        "income_retention": 0,
        "total_operation": 260.00,
        "total_to_pay": 260.00,
        "taxes": [
        {
        "code": "20",
        "description": "IVA 13%",
        "value": 26.00
        }
        ],
        "payment_types": [
        {
        "code": "02",
        "amount": 260.00
        }
        ]
        }
        }
        ```

        ## Ejemplo de Respuesta
        ```json
        {
        "success": true,
        "reception_stamp": "202533D8A3CB39484D...",
        "qr_link": "https://admin.factura.gob.sv/consultaPublica?ambiente=00&codGen=UUID-GENERADO&fechaEmi=FECHA-EMISION",
        "data": {
        "identificacion": {
        "version": 3,
        "ambiente": "00",
        "tipoDte": "03",
        "numeroControl": "DTE-03-C0020000-000000000000001",
        "codigoGeneracion": "96B3D5DD-EE92-4...",
        "tipoModelo": 1,
        "tipoOperacion": 1,
        "tipoContingencia": null,
        "motivoContin": null,
        "fecEmi": "2025-04-12",
        "horEmi": "19:38:32",
        "tipoMoneda": "USD"
        },
        "emisor": {
        "nit": "00000000000000",
        "nrc": "0000000",
        "nombre": "EMPRESA DE PRUEBAS SA DE CV 2",
        "codActividad": "00000",
        "descActividad": "Venta al por mayor de otros productos",
        "tipoEstablecimiento": "01",
        "direccion": {
        "departamento": "06",
        "municipio": "20",
        "complemento": "BOULEVARD SANTA ELENA SUR, SANTA TECLA"
        },
        "telefono": "21212121",
        "correo": "facturacion@empresa.com.sv",
        "nombreComercial": "EJEMPLO",
        "codEstableMH": null,
        "codEstable": "C002",
        "codPuntoVentaMH": null,
        "codPuntoVenta": null
        },
        "receptor": {
        "nombre": "CLIENTE DE PRUEBA",
        "nrc": "0000",
        "nit": "00000000000000",
        "codActividad": "00000",
        "descActividad": "ACTIVIDAD ECONOMICA DE EJEMPLO",
        "direccion": {
        "departamento": "06",
        "municipio": "22",
        "complemento": "Dirección de Prueba 1, N° 1234"
        },
        "telefono": "21212828",
        "correo": "cliente@gmail.com",
        "nombreComercial": "EJEMPLO S.A de S.V"
        },
        "cuerpoDocumento": [
        {
        "numItem": 1,
        "tipoItem": 1,
        "numeroDocumento": null,
        "codigo": null,
        "codTributo": null,
        "descripcion": "Venta gravada",
        "cantidad": 1,
        "uniMedida": 59,
        "precioUni": 2000,
        "montoDescu": 0,
        "ventaNoSuj": 0,
        "ventaExenta": 0,
        "ventaGravada": 2000,
        "tributos": [
        "20"
        ],
        "psv": 0,
        "noGravado": 0
        }
        ],
        "resumen": {
        "totalNoSuj": 0,
        "totalExenta": 0,
        "totalGravada": 2000,
        "subTotalVentas": 2000,
        "descuNoSuj": 0,
        "descuExenta": 0,
        "descuGravada": 0,
        "porcentajeDescuento": 0,
        "totalDescu": 0,
        "tributos": [
        {
        "codigo": "20",
        "descripcion": "IVA 13%",
        "valor": 260
        }
        ],
        "subTotal": 2000,
        "ivaRete1": 0,
        "ivaPerci1": 0,
        "reteRenta": 0,
        "montoTotalOperacion": 2260,
        "totalNoGravado": 0,
        "totalPagar": 2260,
        "totalLetras": "DOS MIL DOSCIENTOS SESENTA 00/100",
        "saldoFavor": 0,
        "condicionOperacion": 1,
        "pagos": [
        {
        "codigo": "01",
        "montoPago": 2260,
        "referencia": null,
        "plazo": null,
        "periodo": null
        }
        ],
        "numPagoElectronico": null
        },
        "documentoRelacionado": null,
        "otrosDocumentos": null,
        "ventaTercero": null,
        "extension": null,
        "apendice": [
        {
        "campo": "Datos del documento",
        "etiqueta": "Sello de recepción",
        "valor": "202533D8A3CB39484D..."
        }
        ]
        }
        }
        ```

        Para ver ejemplos completos, consulta: /jsonExamples/
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Datos de CCF
        in: body
        name: ccf
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Crear Comprobante de Credito Fiscal
      tags:
      - DTE
  /dte/creditnote:
    post:
      consumes:
      - application/json
      description: |-
        // @Description Este endpoint permite crear y emitir una Nota de Crédito electrónica.

        ## Ejemplo de Solicitud
        ```json
        {
        "items": [
        {
        "type": 1,
        "description": "Venta gravada",
        "quantity": 1,
        "unit_measure": 59,
        "unit_price": 1000.00,
        "taxed_sale": 1000.00,
        "exempt_sale": 0,
        "non_subject_sale": 0,
        "taxes": [
        "20"
        ],
        "related_doc" : "DE4BD411-DEBF-4EB8-B..."
        }
        ],
        "receiver": {
        "nrc": "0000",
        "nit": "00000000000000",
        "name": "CLIENTE DE PRUEBA",
        "commercial_name": "EJEMPLO S.A de S.V",
        "activity_code": "47190",
        "activity_description": "ACTIVIDADES JURÍDICAS Y CONTABLES",
        "address": {
        "department": "06",
        "municipality": "22",
        "complement": "Dirección de Prueba 1, N° 1234"
        },
        "phone": "21212828",
        "email": "cliente@gmail.com"
        },
        "summary": {
        "operation_condition": 1,
        "total_taxed": 1000.00,
        "iva_retention": 10,
        "sub_total_sales": 1000.00,
        "sub_total": 1000.00,
        "total_operation": 1120.00,
        "taxes": [
        {
        "code": "20",
        "description": "IVA 13%",
        "value": 130.00
        }
        ]
        },
        "extension": {
        "delivery_name": "Juan Pérez",
        "delivery_document": "06141809931020",
        "receiver_name": "María López",
        "receiver_document": "06142509882011",
        "observation": "Entrega en oficina central"
        },
        "related_docs": [
        {
        "document_type": "03",
        "generation_type": 2,
        "document_number": "DE4BD411-DEBF-4..."
        }
        ],
        "appendixes": null,
        "third_party_sale": null,
        "other_docs": null

        }

        ```

        ## Ejemplo de Respuesta
        ```json
        {
        "success": true,
        "reception_stamp": "202534D1BECF3321453...",
        "qr_link": "https://admin.factura.gob.sv/consultaPublica?ambiente=00&codGen=5367521F-DD80-4B6B-9...&fechaEmi=FECHA-DE-EMISION",
        "data": {
        "identificacion": {
        "version": 3,
        "ambiente": "00",
        "tipoDte": "05",
        "numeroControl": "DTE-05-C0020000-000000000000001",
        "codigoGeneracion": "5367521F-DD80-4B6B-9...",
        "tipoModelo": 1,
        "tipoOperacion": 1,
        "tipoContingencia": null,
        "motivoContin": null,
        "fecEmi": "2025-04-16",
        "horEmi": "17:54:19",
        "tipoMoneda": "USD"
        },
        "emisor": {
        "nit": "00000000000000",
        "nrc": "0000000",
        "nombre": "EMPRESA DE PRUEBAS SA DE CV 2",
        "codActividad": "00000",
        "descActividad": "Venta al por mayor de otros productos",
        "tipoEstablecimiento": "01",
        "direccion": {
        "departamento": "06",
        "municipio": "20",
        "complemento": "BOULEVARD SANTA ELENA SUR, SANTA TECLA"
        },
        "telefono": "21212828",
        "correo": "facturacion@empresa.com.sv",
        "nombreComercial": "EJEMPLO"
        },
        "receptor": {
        "nombre": "CLIENTE DE PRUEBA",
        "nrc": "0000",
        "nit": "00000000000000",
        "codActividad": "00000",
        "descActividad": "ACTIVIDADES JURÍDICAS Y CONTABLES",
        "direccion": {
        "departamento": "06",
        "municipio": "22",
        "complemento": "Dirección de Prueba 1, N° 1234"
        },
        "telefono": "21212828",
        "correo": "cliente@gmail.com",
        "nombreComercial": "EJEMPLO S.A de S.V"
        },
        "cuerpoDocumento": [
        {
        "numItem": 1,
        "tipoItem": 1,
        "numeroDocumento": "DE4BD411-DEBF-4EB8-B...",
        "codigo": null,
        "codTributo": null,
        "descripcion": "Venta gravada",
        "cantidad": 1,
        "uniMedida": 59,
        "precioUni": 1000,
        "montoDescu": 0,
        "ventaNoSuj": 0,
        "ventaExenta": 0,
        "ventaGravada": 1000,
        "tributos": [
        "20"
        ]
        }
        ],
        "resumen": {
        "totalNoSuj": 0,
        "totalExenta": 0,
        "totalGravada": 1000,
        "subTotalVentas": 1000,
        "descuNoSuj": 0,
        "descuExenta": 0,
        "descuGravada": 0,
        "totalDescu": 0,
        "tributos": [
        {
        "codigo": "20",
        "descripcion": "IVA 13%",
        "valor": 130
        }
        ],
        "subTotal": 1000,
        "ivaRete1": 10,
        "ivaPerci1": 0,
        "reteRenta": 0,
        "montoTotalOperacion": 1120,
        "totalLetras": "UN MIL CIENTO VEINTE 00/100",
        "condicionOperacion": 1
        },
        "documentoRelacionado": [
        {
        "tipoDocumento": "03",
        "tipoGeneracion": 2,
        "numeroDocumento": "DE4BD411-DEBF-4EB8-B...",
        "fechaEmision": "2025-04-16"
        }
        ],
        "ventaTercero": null,
        "extension": {
        "nombEntrega": "Juan Pérez",
        "docuEntrega": "06141809931020",
        "nombRecibe": "María López",
        "docuRecibe": "06142509882011",
        "observaciones": "Entrega en oficina central"
        },
        "apendice": [
        {
        "campo": "Datos del documento",
        "etiqueta": "Sello de recepción",
        "valor": "202534D1BECF33214..."
        }
        ]
        }
        }
        ```

        Para ver ejemplos completos, consulta: /jsonExamples/
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Datos de la nota de credito
        in: body
        name: creditnote
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Crear Nota de Credito
      tags:
      - DTE
  /dte/invalidation:
    post:
      consumes:
      - application/json
      description: Invalida un DTE existente
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Datos para invalidación
        in: body
        name: invalidation
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Invalidar DTE
      tags:
      - DTE
  /dte/invoices:
    post:
      consumes:
      - application/json
      description: |-
        // @Description Este endpoint permite crear y emitir una Factura Electrónica.

        ## Ejemplo de Solicitud
        ```json
        {
        "items": [
        {
        "type": 1,
        "description": "CODO PVC 3/4",
        "quantity": 12,
        "unit_measure": 59,
        "unit_price": 0.65,
        "discount": 0,
        "code": "COD1",
        "non_subject_sale": 0,
        "exempt_sale": 0,
        "taxed_sale": 7.8,
        "suggested_price": 0,
        "non_taxed": 0,
        "iva_item": 0.9
        },
        {
        "type": 1,
        "description": "CODO PVC 1",
        "quantity": 123,
        "unit_measure": 59,
        "unit_price": 0.75,
        "discount": 0,
        "code": "COD2",
        "non_subject_sale": 0,
        "exempt_sale": 0,
        "taxed_sale": 92.25,
        "suggested_price": 0,
        "non_taxed": 0,
        "iva_item": 10.61
        }
        ],
        "receiver": {
        "document_type": "13",
        "document_number": "00000000-0",
        "name": "CLIENTE DE PRUEBA",
        "address": {
        "department": "08",
        "municipality": "23",
        "complement": "SOYAPANGO, SAN SALVADOR"
        },
        "phone": "21212121",
        "email": "cliente@gmail.com"
        },
        "summary": {
        "total_non_subject": 0,
        "total_exempt": 0,
        "total_taxed": 100.05,
        "sub_total": 100.05,
        "non_subject_discount": 0,
        "exempt_discount": 0,
        "taxed_discount": 0,
        "discount_percentage": 0,
        "total_discount": 0,
        "sub_total_sales": 100.05,
        "total_operation": 100.05,
        "total_non_taxed": 0,
        "total_to_pay": 99.05,
        "operation_condition": 1,
        "iva_retention": 1.00,
        "total_iva": 11.51,
        "payment_types": [
        {
        "code": "01",
        "amount": 99.05
        }
        ]
        },


        "third_party_sale": null,
        "related_docs": null,
        "other_docs": null,
        "appendixes": null
        }
        ```

        ## Ejemplo de Respuesta
        ```json
        {
        "success": true,
        "reception_stamp": "202533D8A3CB39484D...",
        "qr_link": "https://admin.factura.gob.sv/consultaPublica?ambiente=00&codGen=UUID-GENERADO&fechaEmi=FECHA-EMISION",
        "data": {
        "identificacion": {
        "version": 1,
        "ambiente": "00",
        "tipoDte": "01",
        "numeroControl": "DTE-01-00000000-000000000000001",
        "codigoGeneracion": "29378712-E876-4...",
        "tipoModelo": 1,
        "tipoOperacion": 1,
        "tipoContingencia": null,
        "motivoContin": null,
        "fecEmi": "2025-04-16",
        "horEmi": "15:00:48",
        "tipoMoneda": "USD"
        },
        "resumen": {
        "totalNoSuj": 0,
        "totalExenta": 0,
        "totalGravada": 100.05,
        "subTotalVentas": 100.05,
        "descuNoSuj": 0,
        "descuExenta": 0,
        "descuGravada": 0,
        "porcentajeDescuento": 0,
        "totalDescu": 0,
        "tributos": [],
        "subTotal": 100.05,
        "reteRenta": 0,
        "ivaRete1": 1,
        "montoTotalOperacion": 100.05,
        "totalNoGravado": 0,
        "totalPagar": 99.05,
        "totalLetras": "NOVENTA Y NUEVE 05/100",
        "totalIva": 11.51,
        "saldoFavor": 0,
        "condicionOperacion": 1,
        "pagos": [
        {
        "codigo": "01",
        "montoPago": 99.05,
        "referencia": null,
        "plazo": null,
        "periodo": null
        }
        ],
        "numPagoElectronico": null
        },
        "emisor": {
        "nit": "00000000000000",
        "nrc": "0000000",
        "nombre": "EMPRESA DE PRUEBAS SA DE CV 2",
        "codActividad": "00000",
        "descActividad": "Venta al por mayor de otros productos",
        "tipoEstablecimiento": "01",
        "direccion": {
        "departamento": "06",
        "municipio": "20",
        "complemento": "BOULEVARD SANTA ELENA SUR, SANTA TECLA"
        },
        "telefono": "21212828",
        "correo": "facturacion@empresa.com.sv",
        "nombreComercial": "EJEMPLO",
        "codEstableMH": null,
        "codEstable": null,
        "codPuntoVentaMH": null,
        "codPuntoVenta": null
        },
        "receptor": {
        "nombre": "CLIENTE DE PRUEBA",
        "tipoDocumento": "13",
        "numDocumento": "00000000-0",
        "nrc": null,
        "codActividad": null,
        "descActividad": null,
        "direccion": {
        "departamento": "08",
        "municipio": "23",
        "complemento": "SOYAPANGO, SAN SALVADOR"
        },
        "telefono": "21212121",
        "correo": "cliente@gmail.com"
        },
        "cuerpoDocumento": [
        {
        "numItem": 1,
        "tipoItem": 1,
        "numeroDocumento": null,
        "codigo": null,
        "codTributo": null,
        "descripcion": "CODO PVC 3/4",
        "cantidad": 12,
        "uniMedida": 59,
        "precioUni": 0.65,
        "montoDescu": 0,
        "ventaNoSuj": 0,
        "ventaExenta": 0,
        "ventaGravada": 7.8,
        "tributos": null,
        "psv": 0,
        "noGravado": 0,
        "ivaItem": 0.9
        },
        {
        "numItem": 2,
        "tipoItem": 1,
        "numeroDocumento": null,
        "codigo": null,
        "codTributo": null,
        "descripcion": "CODO PVC 1",
        "cantidad": 123,
        "uniMedida": 59,
        "precioUni": 0.75,
        "montoDescu": 0,
        "ventaNoSuj": 0,
        "ventaExenta": 0,
        "ventaGravada": 92.25,
        "tributos": null,
        "psv": 0,
        "noGravado": 0,
        "ivaItem": 10.61
        }
        ],
        "documentoRelacionado": null,
        "otrosDocumentos": null,
        "ventaTercero": null,
        "extension": null,
        "apendice": [
        {
        "campo": "Datos del documento",
        "etiqueta": "Sello de recepción",
        "valor": "202533D8A3CB39484D..."
        }
        ]
        }
        }
        ```

        Para ver ejemplos completos, consulta: /jsonExamples/
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Datos de la factura
        in: body
        name: invoice
        required: true
        schema:
          additionalProperties: true
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Crear factura electronica
      tags:
      - DTE
  /dte/retention:
    post:
      consumes:
      - application/json
      description: |-
        // @Description Este endpoint permite crear y emitir un Comprobante de Retención electrónico.

        ## Ejemplo de Solicitud
        ```json
        {
        "items": [
        {
        "type": 2,
        "document_number": "1EEAB582-AA75-4D9C-A...",
        "description": "Compra de equipos informáticos",
        "retention_code": "22"
        }
        ],
        "receiver": {
        "document_type": "36",
        "document_number": "00000000000000",
        "nrc": "000000",
        "name": "EJEMPLO S.A de S.V",
        "commercial_name": "EJEMPLO",
        "activity_code": "00000",
        "activity_description": "ACTIVIDADES JURÍDICAS Y CONTABLES",
        "address": {
        "department": "06",
        "municipality": "20",
        "complement": "Dirección de Prueba 1, N° 1234"
        },
        "phone": "21212121",
        "email": "cliente@gmail.com"
        },
        "extension": {
        "delivery_name": "Juan Pérez",
        "delivery_document": "06141809931020",
        "receiver_name": "María López",
        "receiver_document": "06142509882011",
        "observation": "Entrega en oficina central"
        },

        "appendixes": null
        }
        ```

        ## Ejemplo de Respuesta
        ```json
        {
        "success": true,
        "reception_stamp": "202534D1BECF3321453...",
        "qr_link": "https://admin.factura.gob.sv/consultaPublica?ambiente=00&codGen=5367521F-DD80-4B6B-9...&fechaEmi=FECHA-DE-EMISION",
        "data":{
        "identificacion": {
        "version": 1,
        "ambiente": "00",
        "tipoDte": "07",
        "numeroControl": "DTE-07-C0020000-000000000000001",
        "codigoGeneracion": "EB399033-E184-41D2-B01...",
        "tipoModelo": 1,
        "tipoOperacion": 1,
        "tipoContingencia": null,
        "motivoContin": null,
        "fecEmi": "2025-04-16",
        "horEmi": "20:40:56",
        "tipoMoneda": "USD"
        },
        "resumen": {
        "totalSujetoRetencion": 80097.35,
        "totalIVAretenido": 800.97,
        "totalIVAretenidoLetras": "OCHOCIENTOS 97/100"
        },
        "emisor": {
        "nit": "00000000000000",
        "nrc": "0000000",
        "nombre": "EMPRESA DE PRUEBAS SA DE CV 2",
        "codActividad": "00000",
        "descActividad": "Venta al por mayor de otros productos",
        "tipoEstablecimiento": "01",
        "direccion": {
        "departamento": "06",
        "municipio": "20",
        "complemento": "BOULEVARD SANTA ELENA SUR, SANTA TECLA"
        },
        "telefono": "21212828",
        "correo": "facturacion@empresa.com.sv",
        "nombreComercial": "JEMEPLO",
        "codigoMH": null,
        "codigo": "C002",
        "puntoVentaMH": null,
        "puntoVenta": null
        },
        "receptor": {
        "nombre": "EJEMPLO S.A DE C.V",
        "tipoDocumento": "36",
        "numDocumento": "00000000000000",
        "nrc": "000000",
        "codActividad": "00000",
        "descActividad": "ACTIVIDADES JURÍDICAS Y CONTABLES",
        "direccion": {
        "departamento": "06",
        "municipio": "20",
        "complemento": "Dirección de Prueba 1, N° 1234"
        },
        "telefono": "21212121",
        "correo": "cliente@gmail.com",
        "nombreComercial": "EJEMPLO"
        },
        "cuerpoDocumento": [
        {
        "numItem": 1,
        "tipoDte": "03",
        "tipoDoc": 2,
        "numDocumento": "1EEAB582-AA75-4D9C-AFF...",
        "fechaEmision": "2025-04-11",
        "montoSujetoGrav": 80097.35,
        "codigoRetencionMH": "22",
        "ivaRetenido": 800.97,
        "descripcion": "Compra de equipos informáticos"
        }
        ],
        "extension": {
        "nombEntrega": "Juan Pérez",
        "docuEntrega": "06141809931020",
        "nombRecibe": "María López",
        "docuRecibe": "06142509882011",
        "observaciones": "Entrega en oficina central"
        },
        "apendice": [
        {
        "campo": "Datos del documento",
        "etiqueta": "Sello de recepción",
        "valor": "202534D1BECF33214..."
        }
        ]
        }
        }
        ```

        Para ver ejemplos completos, consulta: /jsonExamples/
      parameters:
      - description: Bearer token
        in: header
        name: Authorization
        required: true
        type: string
      - description: Datos del comprobante de Retencion
        in: body
        name: retention
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Crear Comprobante de Retencion
      tags:
      - DTE
  /health:
    get:
      consumes:
      - application/json
      description: Check the health of all core service
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      summary: Health Check
      tags:
      - Health
  /metrics:
    get:
      consumes:
      - application/json
      description: Get metrics for a specific endpoint
      parameters:
      - description: Token JWT with Format 'Bearer {token}'
        in: header
        name: Authorization
        required: true
        type: string
      - description: Endpoint to filter metrics
        in: query
        name: endpoint
        type: string
      - description: HTTP method to filter metrics
        in: query
        name: method
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      security:
      - BearerAuth: []
      summary: Get endpoint metrics
      tags:
      - Metrics
  /test:
    get:
      consumes:
      - application/json
      description: Run system test
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_MarlonG1_api-facturacion-sv_internal_infrastructure_api_response.APIError'
      summary: Run system test
      tags:
      - Test
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
